"use strict";(self["webpackChunkproyecto_final"]=self["webpackChunkproyecto_final"]||[]).push([[681],{2956:function(t,o,r){r.d(o,{Z:function(){return l}});var a=function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("div",[r("transition",{attrs:{name:"fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!t.desplegado,expression:"!desplegado"}],key:"carrito",staticClass:"carrito",class:{activo:t.desplegado,inactivo:t.cerrado}},[r("img",{staticClass:"imgCarrito",attrs:{src:"https://i.imgur.com/3e91bR7.png",alt:"Logo Carrito"},on:{click:function(o){return t.desplegarCarrito()}}})])]),r("transition",{attrs:{name:"fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.desplegado,expression:"desplegado"}],key:"carritoDesplegado",staticClass:"carritoDesplegado",class:{desplegado:!t.desplegado,cerrado:!t.cerrado}},[r("img",{staticClass:"cerrar",attrs:{src:"https://i.imgur.com/JyKCGKd.png",alt:"Cerrar"},on:{click:function(o){return t.cerrarCarrito()}}}),r("h2",[t._v("Tu carrito")]),0!=t.carrito.length?r("div",[r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",{staticClass:"tituloTabla col-2",attrs:{scope:"col"}},[t._v("Cantidad")]),r("th",{staticClass:"tituloTabla col-4",attrs:{scope:"col"}},[t._v("Descripción")]),r("th",{staticClass:"tituloTabla col-4",attrs:{scope:"col"}},[t._v("Precio")]),r("th",{staticClass:"tituloTabla col-2",attrs:{scope:"col"}},[t._v("Eliminar")])])]),r("tbody",t._l(t.carrito,(function(o){return r("tr",{key:o.id},[r("td",{staticClass:"col-2"},[t._v(t._s(o.stock))]),r("td",{staticClass:"col-4"},[t._v(t._s(o.name))]),r("td",{staticClass:"col-4"},[t._v("$ "+t._s(o.price*o.stock))]),r("td",{staticClass:"col-2"},[r("input",{staticClass:"btn btn-danger",attrs:{type:"button",value:"Eliminar"},on:{click:function(r){return t.eliminarProductoCarrito(o)}}})])])})),0)]),r("h4",[t._v("Total: $ "+t._s(t.precioTotal))]),r("div",{staticClass:"finalizarCompraDiv"},[r("button",{staticClass:"finalizarCompraButton",on:{click:function(o){return t.createOrder(t.precioTotal)}}},[t._v("Finalizar Compra")])])]):r("div",[r("h4",[t._v("Tu carrito esta vacío!")])])])])],1)},c=[],e=r(3019),s=(r(8309),r(8862),r(1539),r(4747),r(4665)),i={data:function(){return{desplegado:!1,cerrado:!1}},methods:(0,e.Z)((0,e.Z)((0,e.Z)({},(0,s.nv)("products",["getProductsFromAPI","updateStockProduct"])),(0,s.nv)("cart",["deleteCartProduct","createOrderToAPI","updateStockAPI","restartCart","setACart"])),{},{desplegarCarrito:function(){this.cerrado=!1,this.desplegado=!0},cerrarCarrito:function(){this.desplegado=!1,this.cerrado=!0},eliminarProductoCarrito:function(t){this.updateStockProduct(t),this.deleteCartProduct(t.id),alert("El producto ".concat(t.name," fue eliminado exitosamente"))},createOrder:function(t){var o=this,r=JSON.parse(JSON.stringify(this.carrito));this.createOrderToAPI(t),r.forEach((function(t){o.updateStockAPI(t)})),alert('Su orden fue enviada correctamente, y puede verla en su apartado de "Mis Ordenes"'),this.restartCart()}}),computed:(0,e.Z)((0,e.Z)((0,e.Z)((0,e.Z)((0,e.Z)({},(0,s.rn)("cart",["carrito"])),(0,s.rn)("products",["products"])),(0,s.Se)("cart",["getCarrito"])),(0,s.Se)("products",["getProducts"])),{},{cantidadTotal:function(){var t=0;return this.carrito.forEach((function(o){t+=parseInt(o.stock)})),t},precioTotal:function(){var t=0;return this.carrito.forEach((function(o){t+=o.price*o.stock})),t}}),mounted:function(){var t=this,o=JSON.parse(localStorage.getItem("cart"));void 0!=o&&this.setACart(o).then((function(){o.forEach((function(o){t.products.forEach((function(t){console.log(t),o.id==t.id&&(t.stock-=o.stock)}))}))}))}},n=i,d=r(1001),u=(0,d.Z)(n,a,c,!1,null,"69759760",null),l=u.exports},7681:function(t,o,r){r.r(o),r.d(o,{default:function(){return S}});var a=function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("div",[r("div",{staticClass:"usuarios"},[r("Productos")],1)])},c=[],e=r(3019),s=r(4665),i=function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("div",[r("Carrito"),r("div",{staticClass:"row"},t._l(t.products.products,(function(t){return r("div",{key:t.id,staticClass:"col centrado"},[r("Producto",{attrs:{producto:t}})],1)})),0)],1)},n=[],d=function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("div",[r("div",{staticClass:"grillaProducto"},[r("img",{staticClass:"imgGrilla",attrs:{alt:t.producto.name,src:t.producto.img}}),r("h4",[t._v(t._s(t.producto.name))]),r("div",[t._v("Disponibles: "+t._s(t.producto.stock))]),r("div",[t._v("$ "+t._s(t.producto.price))]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.contador,expression:"contador"}],attrs:{type:"number"},domProps:{value:t.contador},on:{keyup:function(o){return t.checkContador()},change:function(o){return t.checkContador()},input:function(o){o.target.composing||(t.contador=o.target.value)}}}),r("div",{staticClass:"divEditar"},[r("button",{staticClass:"btn-editar save",attrs:{disabled:!t.botonProductoHabilitado},on:{click:function(o){return t.agregarProductoCarrito()}}},[r("span",[t._v(t._s(t.valorBotonProducto))])]),r("router-link",{staticClass:"noUnderline",attrs:{to:{name:"Producto",params:{id:t.producto.id}}}},[r("button",{staticClass:"btn-editar edit",attrs:{type:"button"}},[r("span",[t._v("Ver Detalle")])])])],1)])])},u=[],l=(r(1539),r(4747),{data:function(){return{contador:0,valorBotonProducto:"Agregar",botonProductoHabilitado:!1}},name:"CartaProducto",props:{producto:{type:Object,required:!0}},computed:(0,e.Z)((0,e.Z)((0,e.Z)((0,e.Z)({},(0,s.rn)(["products"])),(0,s.Se)(["getProducts"])),(0,s.rn)(["cart"])),(0,s.Se)(["getCart"])),methods:(0,e.Z)((0,e.Z)((0,e.Z)({},(0,s.nv)("products",["getProductsFromAPI","setActualProduct"])),(0,s.nv)("cart",["addProductToCart"])),{},{checkContador:function(){var t=parseInt(this.contador);t>this.producto.stock?this.contador=this.producto.stock:t<0&&(this.contador=0),this.checkStock()},checkStock:function(){var t=parseInt(this.contador);0==this.producto.stock?(this.botonProductoHabilitado=!1,this.valorBotonProducto="Sin stock"):0!=this.producto.stock&&0==t?(this.botonProductoHabilitado=!1,this.valorBotonProducto="Agregar"):(this.botonProductoHabilitado=!0,this.valorBotonProducto="Agregar")},agregarProductoCarrito:function(){var t=(0,e.Z)({},this.producto);t.stock=parseInt(this.contador),this.addProductToCart(t),this.producto.stock-=parseInt(this.contador),this.contador=0,this.checkStock()},checkCarritoStock:function(){var t=this;this.cart.carrito.forEach((function(o){o.id==t.producto.id&&(t.producto.stock-=o.stock)}))}}),mounted:function(){this.checkCarritoStock()}}),p=l,h=r(1001),v=(0,h.Z)(p,d,u,!1,null,"62c7b2f4",null),m=v.exports,f=r(2956),g={name:"Products",components:{Producto:m,Carrito:f.Z},mounted:function(){this.getProductsFromAPI()},computed:(0,e.Z)((0,e.Z)({},(0,s.rn)(["products"])),(0,s.Se)(["getProducts"])),methods:(0,e.Z)({},(0,s.nv)("products",["getProductsFromAPI"]))},C=g,P=(0,h.Z)(C,i,n,!1,null,"7844b7df",null),k=P.exports,_={name:"Usuario",components:{Productos:k},computed:(0,e.Z)((0,e.Z)({},(0,s.rn)(["products",["products"]])),(0,s.Se)(["getProducts"])),mounted:function(){var t=JSON.parse(localStorage.getItem("user"));null!=t?this.setUserLogged(t):this.$router.push("/")},methods:(0,e.Z)((0,e.Z)({},(0,s.nv)("users",["setUserLogged"])),(0,s.nv)("products",["getProductsFromAPI"]))},b=_,Z=(0,h.Z)(b,a,c,!1,null,null,null),S=Z.exports}}]);
//# sourceMappingURL=681-legacy.2ecb4ea9.js.map