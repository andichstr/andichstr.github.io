"use strict";(self["webpackChunkproyecto_final"]=self["webpackChunkproyecto_final"]||[]).push([[236],{6236:function(s,r,e){e.r(r),e.d(r,{default:function(){return d}});var t=function(){var s=this,r=s.$createElement,e=s._self._c||r;return e("div",{staticClass:"container"},[e("img",{staticClass:"portada",attrs:{src:"https://i.imgur.com/eLUSUFJ.png",alt:"logo"}}),e("h2",[s._v("Inicio de Sesión")]),e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"floating-content"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.userForm.username,expression:"userForm.username"}],staticClass:"floating-input",attrs:{type:"text",id:"username",placeholder:" "},domProps:{value:s.userForm.username},on:{input:function(r){r.target.composing||s.$set(s.userForm,"username",r.target.value)}}}),e("label",{staticClass:"floating-label",attrs:{for:"username"}},[s._v("Usuario: ")])]),e("div",{staticClass:"floating-content"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.userForm.password,expression:"userForm.password"}],staticClass:"floating-input",attrs:{type:"password",id:"password",placeholder:" "},domProps:{value:s.userForm.password},on:{input:function(r){r.target.composing||s.$set(s.userForm,"password",r.target.value)}}}),e("label",{staticClass:"floating-label",attrs:{for:"password"}},[s._v("Contraseña: ")])]),e("div",{staticClass:"row divLogin"},[e("button",{staticClass:"btn-login",attrs:{type:"button"},on:{click:s.Login}},[e("span",[s._v("Login")])])]),e("div",{staticClass:"row centrado"},[e("router-link",{attrs:{to:"/register"}},[s._v("¿No estas registrado? ¡Registrate haciendo click aquí!")])],1)])])},o=[],a=e(4665),i={name:"Login",data(){return{userForm:{username:"",password:""},msgError:""}},mounted(){this.getUsersFromAPI(),localStorage.removeItem("user")},methods:{...(0,a.nv)("users",["getUsersFromAPI","setUserLogged"]),tryToLog(s){for(const e of s)if(e.username==this.userForm.username){if(e.password==this.userForm.password){var r={isValid:!0,user:e};return r}r={isValid:!1,err:-1}}else r={isValid:!1,err:-2};return r},Login(){let s=this.tryToLog(this.users.users);s.isValid?(this.setUserLogged(s.user),delete s.user.password,localStorage.setItem("user",JSON.stringify(s.user)),99==s.user.rol?this.$router.push("/admin"):this.$router.push("/index")):-1===s.err?(this.msgError="La contraseña no coincide con el usuario ingresado.",alert(this.msgError)):-2===s.err&&(this.msgError="El usuario ingresado no se encuentra registrado.",alert(this.msgError))}},computed:{...(0,a.rn)(["users",["users","userLogged","orders"]]),...(0,a.Se)(["getUsers","getUserLogged"])}},n=i,u=e(1001),l=(0,u.Z)(n,t,o,!1,null,"0c560c38",null),d=l.exports}}]);
//# sourceMappingURL=236.de8881e7.js.map