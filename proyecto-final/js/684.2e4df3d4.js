"use strict";(self["webpackChunkproyecto_final"]=self["webpackChunkproyecto_final"]||[]).push([[684],{2684:function(s,e,r){r.r(e),r.d(e,{default:function(){return d}});var t=function(){var s=this,e=s.$createElement,r=s._self._c||e;return r("div",{staticClass:"container"},[r("img",{staticClass:"portada",attrs:{src:"https://i.imgur.com/eLUSUFJ.png",alt:"logo"}}),r("h2",[s._v("Inicio de Sesión")]),r("form",{staticClass:"form",attrs:{action:""}},[r("div",{staticClass:"floating-content"},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.userForm.username,expression:"userForm.username"}],staticClass:"floating-input",attrs:{type:"text",id:"username",placeholder:" "},domProps:{value:s.userForm.username},on:{input:function(e){e.target.composing||s.$set(s.userForm,"username",e.target.value)}}}),r("label",{staticClass:"floating-label",attrs:{for:"username"}},[s._v("Usuario: ")])]),r("div",{staticClass:"floating-content"},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.userForm.password,expression:"userForm.password"}],staticClass:"floating-input",attrs:{type:"password",id:"password",placeholder:" "},domProps:{value:s.userForm.password},on:{input:function(e){e.target.composing||s.$set(s.userForm,"password",e.target.value)}}}),r("label",{staticClass:"floating-label",attrs:{for:"password"}},[s._v("Contraseña: ")])]),r("div",{staticClass:"row divLogin"},[r("button",{staticClass:"btn-login",attrs:{type:"button"},on:{click:s.Login}},[r("span",[s._v("Login")])])]),r("div",{staticClass:"row centrado"},[r("router-link",{attrs:{to:"/register"}},[s._v("¿No estas registrado? ¡Registrate haciendo click aquí!")])],1)])])},o=[],a=r(4665),i={name:"Login",data(){return{userForm:{username:"",password:""},msgError:""}},mounted(){this.getUsersFromAPI(),localStorage.removeItem("user")},methods:{...(0,a.nv)("users",["getUsersFromAPI","setUserLogged"]),tryToLog(s){for(const r of s)if(r.username==this.userForm.username){if(r.password==this.userForm.password){var e={isValid:!0,user:r};return e}e={isValid:!1,err:-1}}else e={isValid:!1,err:-2};return e},Login(){let s=this.tryToLog(this.users.users);s.isValid?(this.setUserLogged(s.user),delete s.user.password,localStorage.setItem("user",JSON.stringify(s.user)),99==s.user.rol?this.$router.push("/admin"):this.$router.push("/index")):-1===s.err?(this.msgError="La contraseña no coincide con el usuario ingresado.",console.log(this.msgError)):-2===s.err&&(this.msgError="El usuario ingresado no se encuentra registrado.",console.log(this.msgError))}},computed:{...(0,a.rn)(["users",["users","userLogged","orders"]]),...(0,a.Se)(["getUsers","getUserLogged"])}},n=i,u=r(1001),l=(0,u.Z)(n,t,o,!1,null,"4cf298f4",null),d=l.exports}}]);
//# sourceMappingURL=684.2e4df3d4.js.map