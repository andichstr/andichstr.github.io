"use strict";(self["webpackChunkproyecto_final"]=self["webpackChunkproyecto_final"]||[]).push([[608],{2956:function(t,r,o){o.d(r,{Z:function(){return l}});var a=function(){var t=this,r=t.$createElement,o=t._self._c||r;return o("div",[o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.desplegado,expression:"!desplegado"}],key:"carrito",staticClass:"carrito",class:{activo:t.desplegado,inactivo:t.cerrado}},[o("img",{staticClass:"imgCarrito",attrs:{src:"https://i.imgur.com/3e91bR7.png",alt:"Logo Carrito"},on:{click:function(r){return t.desplegarCarrito()}}})])]),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.desplegado,expression:"desplegado"}],key:"carritoDesplegado",staticClass:"carritoDesplegado",class:{desplegado:!t.desplegado,cerrado:!t.cerrado}},[o("img",{staticClass:"cerrar",attrs:{src:"https://i.imgur.com/JyKCGKd.png",alt:"Cerrar"},on:{click:function(r){return t.cerrarCarrito()}}}),o("h2",[t._v("Tu carrito")]),0!=t.carrito.length?o("div",[o("table",{staticClass:"table"},[o("thead",[o("tr",[o("th",{staticClass:"tituloTabla col-2",attrs:{scope:"col"}},[t._v("Cantidad")]),o("th",{staticClass:"tituloTabla col-4",attrs:{scope:"col"}},[t._v("Descripción")]),o("th",{staticClass:"tituloTabla col-4",attrs:{scope:"col"}},[t._v("Precio")]),o("th",{staticClass:"tituloTabla col-2",attrs:{scope:"col"}},[t._v("Eliminar")])])]),o("tbody",t._l(t.carrito,(function(r){return o("tr",{key:r.id},[o("td",{staticClass:"col-2"},[t._v(t._s(r.stock))]),o("td",{staticClass:"col-4"},[t._v(t._s(r.name))]),o("td",{staticClass:"col-4"},[t._v("$ "+t._s(r.price*r.stock))]),o("td",{staticClass:"col-2"},[o("input",{staticClass:"btn btn-danger",attrs:{type:"button",value:"Eliminar"},on:{click:function(o){return t.eliminarProductoCarrito(r)}}})])])})),0)]),o("h4",[t._v("Total: $ "+t._s(t.precioTotal))]),o("div",{staticClass:"finalizarCompraDiv"},[o("button",{staticClass:"finalizarCompraButton",on:{click:function(r){return t.createOrder(t.precioTotal)}}},[t._v("Finalizar Compra")])])]):o("div",[o("h4",[t._v("Tu carrito esta vacío!")])])])])],1)},c=[],e=o(4665),s={data(){return{desplegado:!1,cerrado:!1}},methods:{...(0,e.nv)("products",["getProductsFromAPI","updateStockProduct"]),...(0,e.nv)("cart",["deleteCartProduct","createOrderToAPI","updateStockAPI","restartCart","setACart"]),desplegarCarrito(){this.cerrado=!1,this.desplegado=!0},cerrarCarrito(){this.desplegado=!1,this.cerrado=!0},eliminarProductoCarrito(t){this.updateStockProduct(t),this.deleteCartProduct(t.id),alert(`El producto ${t.name} fue eliminado exitosamente`)},createOrder(t){let r=JSON.parse(JSON.stringify(this.carrito));this.createOrderToAPI(t),r.forEach((t=>{this.updateStockAPI(t)})),alert('Su orden fue enviada correctamente, y puede verla en su apartado de "Mis Ordenes"'),this.restartCart()}},computed:{...(0,e.rn)("cart",["carrito"]),...(0,e.rn)("products",["products"]),...(0,e.Se)("cart",["getCarrito"]),...(0,e.Se)("products",["getProducts"]),cantidadTotal(){let t=0;return this.carrito.forEach((r=>{t+=parseInt(r.stock)})),t},precioTotal(){let t=0;return this.carrito.forEach((r=>{t+=r.price*r.stock})),t}},mounted(){let t=JSON.parse(localStorage.getItem("cart"));void 0!=t&&this.setACart(t).then((()=>{t.forEach((t=>{this.products.forEach((r=>{console.log(r),t.id==r.id&&(r.stock-=t.stock)}))}))}))}},i=s,d=o(1001),n=(0,d.Z)(i,a,c,!1,null,"69759760",null),l=n.exports},608:function(t,r,o){o.r(r),o.d(r,{default:function(){return u}});var a=function(){var t=this,r=t.$createElement,o=t._self._c||r;return o("div",{staticClass:"container"},[o("div",[o("Carrito")],1),o("div",{staticClass:"container"},[o("img",{staticClass:"imgProducto",attrs:{alt:t.actualProduct.name,src:t.actualProduct.img}}),o("h1",[t._v(t._s(t.actualProduct.name))]),o("h4",[t._v(t._s(t.actualProduct.desc))]),o("div",[t._v("Disponibles: "+t._s(t.actualProduct.stock))]),o("div",[t._v("$ "+t._s(t.actualProduct.price))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.contador,expression:"contador"}],attrs:{type:"number"},domProps:{value:t.contador},on:{change:function(r){return t.checkContador()},keyup:function(r){return t.checkContador()},input:function(r){r.target.composing||(t.contador=r.target.value)}}}),o("button",{staticClass:"btn-producto save",attrs:{disabled:!t.botonProductoHabilitado},on:{click:function(r){return t.agregarProductoCarrito()}}},[o("span",[t._v(t._s(t.valorBotonProducto))])])]),o("router-link",{attrs:{to:"/index"}},[o("button",{staticClass:"btn-admin volver"},[o("span",[t._v("Volver")])])])],1)},c=[],e=o(2956),s=o(4665),i={name:"Producto",components:{Carrito:e.Z},data(){return{contador:0,valorBotonProducto:"Agregar",botonProductoHabilitado:!1}},computed:{...(0,s.rn)("products",["actualProduct"]),...(0,s.Se)("products",["getProducts"])},methods:{...(0,s.nv)("products",["getProductsFromAPI","setActualProduct"]),...(0,s.nv)("cart",["addProductToCart"]),checkContador(){let t=parseInt(this.contador);t>this.actualProduct.stock?this.contador=this.actualProduct.stock:t<0&&(this.contador=0),this.checkStock()},checkStock(){let t=parseInt(this.contador);0==this.actualProduct.stock?(this.botonProductoHabilitado=!1,this.valorBotonProducto="Sin stock"):0!=this.actualProduct.stock&&0==t?(this.botonProductoHabilitado=!1,this.valorBotonProducto="Agregar"):(this.botonProductoHabilitado=!0,this.valorBotonProducto="Agregar")},agregarProductoCarrito(){let t={...this.actualProduct};t.stock=parseInt(this.contador),this.addProductToCart(t),this.actualProduct.stock-=parseInt(this.contador),this.contador=0,this.checkStock()}},mounted(){this.setActualProduct(this.$route.params.id)}},d=i,n=o(1001),l=(0,n.Z)(d,a,c,!1,null,"3b3135a4",null),u=l.exports}}]);
//# sourceMappingURL=608.168af964.js.map